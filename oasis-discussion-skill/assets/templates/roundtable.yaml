# Roundtable Pattern (圆桌讨论)
# =================================
# Agent layout:
#   0       — Host (主持人)
#   1..N-1  — Panelists (嘉宾)
#
# Flow per round:
#   1. Host introduces/asks question
#   2. Each panelist speaks in turn
#   3. Host summarizes
#   Repeat for 3 sub-rounds per simulation round

version: 1
vars:
  host: 0
  sub_rounds: 3

plan:
  # --- Host opens the discussion ---
  - llm: { agent: "${vars[\"host\"]}" }

  # --- Multi-round discussion ---
  - repeat:
      times: "${vars[\"sub_rounds\"]}"
    do:
      # Each panelist speaks in turn (serial — can build on previous)
      - for_each:
          var: i
          in: "${range(1, num_agents)}"
        do:
          - llm: { agent: "${i}" }

      # Host summarizes after each sub-round
      - llm: { agent: "${vars[\"host\"]}" }
