# Roundtable Pattern (圆桌讨论)
# =================================
# Agent layout:
#   0       — Host (主持人)
#   1..N-1  — Panelists (嘉宾)
#
# Flow per round:
#   1. Host introduces/asks question
#   2. Each panelist speaks in turn
#   3. Host summarizes
#   Repeat for 3 sub-rounds per simulation round

version: 1
vars:
  host: 0
  sub_rounds: 3
  topic: "请在此填写讨论话题"  # ← 修改这里设置话题

plan:
  # --- Host opens the discussion with topic ---
  - manual:
      agent: "${vars[\"host\"]}"
      action_type: create_post
      action_args:
        content: "【圆桌话题】${vars[\"topic\"]}  欢迎各位嘉宾发表看法。"

  # --- Multi-round discussion ---
  - repeat:
      times: "${vars[\"sub_rounds\"]}"
    do:
      # Each panelist speaks in turn (serial — can build on previous)
      - for_each:
          var: i
          in: "${range(1, num_agents)}"
        do:
          - llm: { agent: "${i}" }

      # Host summarizes after each sub-round
      - llm: { agent: "${vars[\"host\"]}" }
